{"ast":null,"code":"import React,{useState}from\"react\";import{Button}from\"baseui/button\";import{styled}from\"baseui\";import axios from\"axios\";import endpoints from'../store/endpoints.json';// Styled message box\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessageBox=styled(\"div\",props=>({width:\"400px\",margin:\"10px auto\",padding:\"10px\",borderRadius:\"8px\",textAlign:\"center\",color:\"#fff\",backgroundColor:props.$success?\"green\":\"red\"}));export default function DeleteWeather(_ref){let{city,onDeleteSuccess}=_ref;const[message,setMessage]=useState(null);const[success,setSuccess]=useState(false);const[loading,setLoading]=useState(false);const handleDelete=async()=>{if(!window.confirm(`Are you sure you want to delete weather info for ${city}?`)){return;}setLoading(true);setMessage(null);try{const response=await axios.delete(`${endpoints.weather_service}${city}`,{headers:{\"Content-Type\":\"application/json\"}});if(response.data.status===\"1\"){setSuccess(true);setMessage(`✅ Weather data for ${city} deleted successfully!`);onDeleteSuccess();}else{setSuccess(false);setMessage(\"❌ Failed to delete the weather data.\");}}catch(error){console.error(\"❌ API Error:\",error);setSuccess(false);setMessage(\"❌ Failed to delete the weather data.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[message&&/*#__PURE__*/_jsx(MessageBox,{$success:success,children:message}),/*#__PURE__*/_jsx(Button,{onClick:handleDelete,disabled:loading,children:loading?\"Deleting...\":\"Delete Weather Info\"})]});}","map":{"version":3,"names":["React","useState","Button","styled","axios","endpoints","jsx","_jsx","jsxs","_jsxs","MessageBox","props","width","margin","padding","borderRadius","textAlign","color","backgroundColor","$success","DeleteWeather","_ref","city","onDeleteSuccess","message","setMessage","success","setSuccess","loading","setLoading","handleDelete","window","confirm","response","delete","weather_service","headers","data","status","error","console","children","onClick","disabled"],"sources":["/tmp/Weather-App/weatherapp_project/weather_frontend/src/components/DeleteWeather.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"baseui/button\";\nimport { styled } from \"baseui\";\nimport axios from \"axios\";\nimport endpoints from '../store/endpoints.json';\n\n// Styled message box\nconst MessageBox = styled(\"div\", (props) => ({\n  width: \"400px\",\n  margin: \"10px auto\",\n  padding: \"10px\",\n  borderRadius: \"8px\",\n  textAlign: \"center\",\n  color: \"#fff\",\n  backgroundColor: props.$success ? \"green\" : \"red\",\n}));\n\nexport default function DeleteWeather({ city, onDeleteSuccess }) {  \n  const [message, setMessage] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const handleDelete = async () => {\n    if (!window.confirm(`Are you sure you want to delete weather info for ${city}?`)) {\n      return;\n    }\n\n    setLoading(true);\n    setMessage(null);\n\n    try {\n        const response = await axios.delete(`${endpoints.weather_service}${city}`, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          });\n      if (response.data.status === \"1\") {\n        setSuccess(true);\n        setMessage(`✅ Weather data for ${city} deleted successfully!`);\n        onDeleteSuccess();  \n      } else {\n        setSuccess(false);\n        setMessage(\"❌ Failed to delete the weather data.\");\n      }\n    } catch (error) {\n      console.error(\"❌ API Error:\", error);\n      setSuccess(false);\n      setMessage(\"❌ Failed to delete the weather data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      {message && <MessageBox $success={success}>{message}</MessageBox>}\n      <Button onClick={handleDelete} disabled={loading}>\n        {loading ? \"Deleting...\" : \"Delete Weather Info\"}\n      </Button>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,MAAM,KAAQ,eAAe,CACtC,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAE/C;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,UAAU,CAAGP,MAAM,CAAC,KAAK,CAAGQ,KAAK,GAAM,CAC3CC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,WAAW,CACnBC,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,KAAK,CACnBC,SAAS,CAAE,QAAQ,CACnBC,KAAK,CAAE,MAAM,CACbC,eAAe,CAAEP,KAAK,CAACQ,QAAQ,CAAG,OAAO,CAAG,KAC9C,CAAC,CAAC,CAAC,CAEH,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAA4B,IAA3B,CAAEC,IAAI,CAAEC,eAAgB,CAAC,CAAAF,IAAA,CAC7D,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC2B,OAAO,CAAEC,UAAU,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAA6B,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACC,MAAM,CAACC,OAAO,CAAC,oDAAoDV,IAAI,GAAG,CAAC,CAAE,CAChF,OACF,CAEAO,UAAU,CAAC,IAAI,CAAC,CAChBJ,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACA,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAA7B,KAAK,CAAC8B,MAAM,CAAC,GAAG7B,SAAS,CAAC8B,eAAe,GAAGb,IAAI,EAAE,CAAE,CACvEc,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACN,GAAIH,QAAQ,CAACI,IAAI,CAACC,MAAM,GAAK,GAAG,CAAE,CAChCX,UAAU,CAAC,IAAI,CAAC,CAChBF,UAAU,CAAC,sBAAsBH,IAAI,wBAAwB,CAAC,CAC9DC,eAAe,CAAC,CAAC,CACnB,CAAC,IAAM,CACLI,UAAU,CAAC,KAAK,CAAC,CACjBF,UAAU,CAAC,sCAAsC,CAAC,CACpD,CACF,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCZ,UAAU,CAAC,KAAK,CAAC,CACjBF,UAAU,CAAC,sCAAsC,CAAC,CACpD,CAAC,OAAS,CACRI,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEpB,KAAA,QAAAgC,QAAA,EACGjB,OAAO,eAAIjB,IAAA,CAACG,UAAU,EAACS,QAAQ,CAAEO,OAAQ,CAAAe,QAAA,CAAEjB,OAAO,CAAa,CAAC,cACjEjB,IAAA,CAACL,MAAM,EAACwC,OAAO,CAAEZ,YAAa,CAACa,QAAQ,CAAEf,OAAQ,CAAAa,QAAA,CAC9Cb,OAAO,CAAG,aAAa,CAAG,qBAAqB,CAC1C,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}